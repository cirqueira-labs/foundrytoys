========================\nCODE SNIPPETS\n========================\nTITLE: Python MainLoop Example\nDESCRIPTION: Illustrates basic usage of the Urwid MainLoop with a simple widget and input handling.\n\nSOURCE: https://urwid.org/manual/mainloop\n\nLANGUAGE: python\nCODE:\n```\nimport urwid\n\ndef handle_input(key):\n    if key in ('q', 'Q'):\n        raise urwid.ExitMainLoop()\n\n# Create a simple widget\ntext_widget = urwid.Text('Hello, Urwid! Press Q to quit.')\n\n# Create the MainLoop\nloop = urwid.MainLoop(text_widget, input_filter=handle_input)\n\n# Start the main loop\nloop.run()\n```\n\n----------------------------------------\n\nTITLE: Urwid MainLoop API Documentation\nDESCRIPTION: Provides details on the MainLoop class methods for managing the Urwid event loop, input handling, and alarms.\n\nSOURCE: https://urwid.org/manual/mainloop\n\nLANGUAGE: APIDOC\nCODE:\n```\nMainLoop:\n  __init__(widget, palette, screen=None, event_loop=None, unhandled_input=None)\n    widget: The top-level widget to display.\n    palette: A list of color definitions.\n    screen: The display screen to use (defaults to a curses screen).\n    event_loop: The event loop implementation to use.\n    unhandled_input: A function to call for input not handled by widgets.\n\n  set_alarm_in(self, seconds, callback, user_data=None)\n    Sets an alarm to trigger after a specified number of seconds.\n    Parameters:\n      seconds: The number of seconds until the alarm triggers.\n      callback: The function to call when the alarm triggers.\n      user_data: Optional data to pass to the callback.\n\n  widget:\n    The current top-level widget.\n\nExitMainLoop:\n  An exception that causes the main loop to exit cleanly.\n```\n\n----------------------------------------\n\nTITLE: Urwid AsyncioEventLoop Integration\nDESCRIPTION: Shows how to integrate Urwid with Python's asyncio module. It allows using asyncio's event loop with Urwid's MainLoop.\n\nSOURCE: https://urwid.org/manual/mainloop\n\nLANGUAGE: python\nCODE:\n```\nimport asyncio\nevl = urwid.AsyncioEventLoop(loop=asyncio.get_event_loop())\nloop = urwid.MainLoop(widget, event_loop=evl)\n```\n\n----------------------------------------\n\nTITLE: Urwid Text Widget Markup Examples\nDESCRIPTION: Demonstrates various ways to use display attributes within Urwid's Text widget for styling text.\n\nSOURCE: https://urwid.org/manual/displayattributes\n\nLANGUAGE: python\nCODE:\n```\nText(u\"a simple string with default attribute\")\n```\n\nLANGUAGE: python\nCODE:\n```\nText(('attr1', u\"a string in display attribute attr1\"))\n```\n\nLANGUAGE: python\nCODE:\n```\nText([u\"a simple string \", ('attr1', u\"ending with attr1\")])\n```\n\n----------------------------------------\n\nTITLE: Custom Selectable Widget Implementation\nDESCRIPTION: Demonstrates the creation of a custom selectable widget in Urwid. The widget displays text, changes to uppercase when focused, and allows users to interact by pressing keys.\n\nSOURCE: https://urwid.org/manual/widgets\n\nLANGUAGE: python\nCODE:\n```\nfrom __future__ import annotations\n\nimport urwid\n\n\nclass SelectablePudding(urwid.Widget):\n    _sizing = frozenset((urwid.FLOW,))\n    _selectable = True\n\n    def __init__(self) -> None:\n        super().__init__()\n        self.pudding = \"pudding\"\n\n    def rows(self, size: tuple[int], focus: bool = False) -> int:\n        return 1\n\n    def render(self, size: tuple[int], focus: bool = False) -> urwid.TextCanvas:\n        (maxcol,) = size\n        num_pudding = maxcol // len(self.pudding)\n        pudding = self.pudding\n        if focus:\n            pudding = pudding.upper()\n        return urwid.TextCanvas([pudding.encode(\"utf-8\") * num_pudding], maxcol=maxcol)\n\n    def keypress(self, size: tuple[int], key: str) -> str | None:\n        if len(key) > 1:\n            return key\n\n        if key.lower() in self.pudding:\n            # remove letter from pudding\n            n = self.pudding.index(key.lower())\n            self.pudding = self.pudding[:n] + self.pudding[n + 1 :]\n            if not self.pudding:\n                self.pudding = \"pudding\"\n            self._invalidate()\n            return None\n\n        return key\n\n```\n